USE gengar_dev;

DROP TABLE IF EXISTS Users;
CREATE TABLE Users
(
	UserID SERIAL PRIMARY KEY,
	GoogleUserID CHAR(64) NOT NULL
);

DROP TABLE IF EXISTS Vaccines;
CREATE TABLE Vaccines
(
	VaccineID SERIAL PRIMARY KEY,
	VaccineName CHAR(50) NOT NULL
);

DROP TABLE IF EXISTS UserVaccine;
CREATE TABLE UserVaccine
(
	UserID BIGINT UNSIGNED NOT NULL,
	VaccineID BIGINT UNSIGNED NOT NULL,
	CONSTRAINT PK_UserVaccine PRIMARY KEY
	(
			UserID,
			VaccineID
	),
	FOREIGN KEY (UserID) REFERENCES Users (UserID),
	FOREIGN KEY (VaccineID) REFERENCES Vaccines (VaccineID),
	RegisterDate DATE NOT NULL,
	ExpirationDate DATE NOT NULL
);

INSERT INTO Users (GoogleUserID)
VALUES
	('5fa6e51bb84716c9b0ba630712997abb0ac5bd178ef1b2a59c4f64073d07055d'),
	('1170c459c8c96ef276770a88225879153dbe1b3f2810dd53928633bbcd13a955');

INSERT INTO Vaccines (VaccineName)
VALUES
	('cert1'),
	('cert2');

INSERT INTO UserVaccine (UserID, VaccineID, RegisterDate, ExpirationDate)
VALUES
	(1, 1, '1988-12-30', '2022-03-30'),
	(1, 2, '2015-02-19', '2021-06-02'),
	(2, 2, '2020-12-12', '2122-11-01');
